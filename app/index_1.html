<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Multimodal Fake News Detection</title>

<style>
/* ================= GLOBAL ================= */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f172a;
  color: white;
  text-align: center;
}

h1 { margin: 30px 0; }

/* ================= GRID (HOME) ================= */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 25px;
  max-width: 900px;
  margin: auto;
  padding: 20px;
}

.btn {
  background: linear-gradient(135deg, #38bdf8, #6366f1);
  padding: 45px;
  border-radius: 18px;
  cursor: pointer;
  font-size: 18px;
  font-weight: bold;
  transition: 0.3s;
}

.btn:hover {
  transform: translateY(-6px);
  background: linear-gradient(135deg, #22d3ee, #818cf8);
}

/* ================= SECTIONS ================= */
.section {
  display: none;
  max-width: 700px;
  margin: 30px auto;
  background: #1e293b;
  padding: 30px;
  border-radius: 16px;
}

textarea, input {
  width: 90%;
  padding: 12px;
  margin: 12px 0;
  border-radius: 8px;
  border: none;
}

textarea { height: 120px; }

button {
  background: #38bdf8;
  border: none;
  padding: 12px 35px;
  border-radius: 25px;
  font-size: 15px;
  cursor: pointer;
  margin-top: 10px;
}

button:hover { background: #22d3ee; }

.back {
  background: #334155;
  margin-top: 20px;
}

.result {
  margin-top: 20px;
  font-size: 16px;
}

.error { color: #f87171; }
.success { color: #4ade80; }
.loading { color: #facc15; }
</style>
</head>

<body>

<h1>üß† Multimodal Fake News Detection</h1>

<!-- ================= HOME ================= -->
<div id="home" class="grid">
  <div class="btn" onclick="showSection('text')">üìù Text</div>
  <div class="btn" onclick="showSection('image')">üñºÔ∏è Image</div>
  <div class="btn" onclick="showSection('video')">üé• Video</div>
</div>

<!-- ================= TEXT ================= -->
<div id="text" class="section">
  <h2>Text Analysis</h2>
  <textarea id="textInput" placeholder="Paste news text here..."></textarea><br>
  <button onclick="analyzeText()">Analyze</button>
  <div id="textResult" class="result"></div>
  <button class="back" onclick="goHome()">‚¨Ö Back</button>
</div>

<!-- ================= IMAGE ================= -->
<div id="image" class="section">
  <h2>Image Analysis</h2>
  <input type="file" id="imageInput" accept="image/*"><br>
  <button onclick="analyzeImage()">Analyze</button>
  <div id="imageResult" class="result"></div>
  <button class="back" onclick="goHome()">‚¨Ö Back</button>
</div>

<!-- ================= VIDEO ================= -->
<div id="video" class="section">
  <h2>Video Analysis</h2>
  <input type="file" id="videoInput" accept="video/*"><br>
  <button onclick="analyzeVideo()">Analyze</button>
  <div id="videoResult" class="result"></div>
  <button class="back" onclick="goHome()">‚¨Ö Back</button>
</div>

<script>
/* ================= NAVIGATION ================= */
function showSection(id) {
  document.getElementById("home").style.display = "none";
  document.querySelectorAll(".section").forEach(s => s.style.display = "none");
  document.getElementById(id).style.display = "block";
}

function goHome() {
  document.querySelectorAll(".section").forEach(s => s.style.display = "none");
  document.getElementById("home").style.display = "grid";
}

/* ================= TEXT API ================= */
async function analyzeText() {
  const text = document.getElementById("textInput").value;
  const output = document.getElementById("textResult");

  if (!text.trim()) {
    output.innerHTML = "<span class='error'>‚ùå Text is required</span>";
    return;
  }

  output.innerHTML = "<span class='loading'>‚è≥ Analyzing...</span>";

  const formData = new FormData();
  formData.append("text", text);

  const res = await fetch("http://127.0.0.1:8000/analyze/text", {
    method: "POST",
    body: formData
  });

  const data = await res.json();
  displayResult(output, data);
}

/* ================= IMAGE API ================= */
async function analyzeImage() {
  const file = document.getElementById("imageInput").files[0];
  const output = document.getElementById("imageResult");

  if (!file || !file.type.startsWith("image/")) {
    output.innerHTML = "<span class='error'>‚ùå Invalid image file</span>";
    return;
  }

  output.innerHTML = "<span class='loading'>‚è≥ Analyzing...</span>";

  const formData = new FormData();
  formData.append("file", file);

  const res = await fetch("http://127.0.0.1:8000/analyze/image", {
    method: "POST",
    body: formData
  });

  const data = await res.json();
  displayResult(output, data);
}

/* ================= VIDEO API ================= */
async function analyzeVideo() {
  const file = document.getElementById("videoInput").files[0];
  const output = document.getElementById("videoResult");

  if (!file || !file.type.startsWith("video/")) {
    output.innerHTML = "<span class='error'>‚ùå Invalid video file</span>";
    return;
  }

  output.innerHTML = "<span class='loading'>‚è≥ Analyzing...</span>";

  const formData = new FormData();
  formData.append("file", file);

  const res = await fetch("http://127.0.0.1:8000/analyze/video", {
    method: "POST",
    body: formData
  });

  const data = await res.json();
  displayResult(output, data);
}

/* ================= RESULT UI ================= */
function displayResult(container, data) {
  container.innerHTML = `
    <p><b>Claim:</b> ${data.claim}</p>
    <p><b>Verdict:</b> ${data.verdict}</p>
    <p><b>Confidence:</b> ${(data.confidence * 100).toFixed(2)}%</p>
    <p><b>Explanation:</b> ${data.explanation}</p>
  `;
}
</script>

</body>
</html>
